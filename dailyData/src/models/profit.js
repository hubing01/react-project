import { routerRedux } from 'dva/router';
import { message } from 'antd';
import { fakeSubmitForm } from '../services/api';
const mock = {
  data : {
    list:[
      {
        date:'2018-04-28',
        id:1,
        key:1,
        sale_300 : 4,
        sale_600 : 0,
        sale_1000 : 2,
        toySales : 0,
        trainsetSales :0,
        ceramicsSales : 0,
        throughTicketSales : 0,
        singleSales : 360,
        destroySales : 226,
        grossEarnings : 2560,
        user : '陈三日',
        point : 0,
        other : 0
      },
      {
        date:'2018-04-29',
        id:2,
        key:2,
        sale_300 : 15,
        sale_600 : 0,
        sale_1000 : 1,
        toySales : 239,
        trainsetSales :0,
        ceramicsSales : 0,
        throughTicketSales : 0,
        singleSales : 1350,
        destroySales : 440,
        grossEarnings : 11829,
        user : '陈三日',
        point : 0,
        other : 0
      },
      {
        date:'2018-04-30',
        id:3,
        key:3,
        sale_300 : 26,
        sale_600 : 1,
        sale_1000 : 0,
        toySales : 250,
        trainsetSales :0,
        ceramicsSales : 0,
        throughTicketSales : 0,
        singleSales : 1421,
        destroySales : 1334,
        grossEarnings : 10352,
        user : '陈三日',
        point : 0,
        other : 0
      },
      {
        date:'2018-05-01',
        id:4,
        key:4,
        sale_300 : 24,
        sale_600 : 0,
        sale_1000 : 2,
        toySales : 322,
        trainsetSales :0,
        ceramicsSales : 0,
        throughTicketSales : 0,
        singleSales : 1530,
        destroySales : 981,
        grossEarnings : 11152,
        user : '陈三日',
        point : 0,
        other : 0
      },
      {
        date:'2018-05-02',
        id:5,
        key:5,
        sale_300 : 4,
        sale_600 : 0,
        sale_1000 : 0,
        toySales : 0,
        trainsetSales :0,
        ceramicsSales : 0,
        throughTicketSales : 0,
        singleSales : 205,
        destroySales : 1070,
        grossEarnings : 1885,
        user : '陈三日',
        point : 0,
        other : 0
      },
      {
        date:'2018-05-03',
        id:6,
        key:6,
        sale_300 : 4,
        sale_600 : 1,
        sale_1000 : 1,
        toySales : 322,
        trainsetSales :0,
        ceramicsSales : 0,
        throughTicketSales : 0,
        singleSales : 80,
        destroySales : 198,
        grossEarnings : 2780,
        user : '陈三日',
        point : 0,
        other : -100
      },
      {
        date:'2018-05-04',
        id:7,
        key:7,
        sale_300 : 6,
        sale_600 : 0,
        sale_1000 : 0,
        toySales : 47.2,
        trainsetSales :0,
        ceramicsSales : 0,
        throughTicketSales : 0,
        singleSales : 445,
        destroySales : 2070,
        grossEarnings : 2562,
        user : '陈三日',
        point : 0,
        other : 0
      },
      {
        date:'2018-05-05',
        id:8,
        key:8,
        sale_300 : 22,
        sale_600 : 0,
        sale_1000 : 0,
        toySales : 158,
        trainsetSales :0,
        ceramicsSales : 0,
        throughTicketSales : 0,
        singleSales : 880,
        destroySales : 4808,
        grossEarnings : 9438,
        user : '陈三日',
        point : 0,
        other : 0
      },
      {
        date:'2018-05-06',
        id:9,
        key:9,
        sale_300 : 8,
        sale_600 : 2,
        sale_1000 : 2,
        toySales : 0,
        trainsetSales :0,
        ceramicsSales : 0,
        throughTicketSales : 168,
        singleSales : 947,
        destroySales : 984,
        grossEarnings : 8303,
        user : '陈三日',
        point : 0,
        other : 0
      },
      {
        date:'2018-05-07',
        id:10,
        key:10,
        sale_300 : 7,
        sale_600 : 0,
        sale_1000 : 0,
        toySales : 129,
        trainsetSales :0,
        ceramicsSales : 0,
        throughTicketSales : 0,
        singleSales : 240,
        destroySales : 446,
        grossEarnings : 3169,
        user : '陈三日',
        point : 0,
        other : 0
      },
      {
        date:'2018-05-08',
        id:11,
        key:11,
        sale_300 : 5,
        sale_600 : 0,
        sale_1000 : 2,
        toySales : 0,
        trainsetSales :190,
        ceramicsSales : 0,
        throughTicketSales : 0,
        singleSales : 310,
        destroySales : 626,
        grossEarnings : 4310,
        user : '陈三日',
        point : 0,
        other : 0
      },
      {
        date:'2018-05-09',
        id:12,
        key:12,
        sale_300 : 6,
        sale_600 : 1,
        sale_1000 : 1,
        toySales : 0,
        trainsetSales :90,
        ceramicsSales : 0,
        throughTicketSales : 0,
        singleSales : 260,
        destroySales : 461,
        grossEarnings : 3930,
        user : '陈三日',
        point : 0,
        other : 0
      },
      {
        date:'2018-05-10',
        id:13,
        key:13,
        sale_300 : 5,
        sale_600 : 0,
        sale_1000 : 0,
        toySales : 0,
        trainsetSales :60,
        ceramicsSales : 0,
        throughTicketSales : 0,
        singleSales : 260,
        destroySales : 503,
        grossEarnings : 2840,
        user : '陈三日',
        point : 0,
        other : 0
      },
      {
        date:'2018-05-11',
        id:14,
        key:14,
        sale_300 : 7,
        sale_600 : 1,
        sale_1000 : 1,
        toySales : 92,
        trainsetSales :210,
        ceramicsSales : 0,
        throughTicketSales : 0,
        singleSales : 460,
        destroySales : 771,
        grossEarnings : 5072,
        user : '陈三日',
        point : 0,
        other : 0
      },
      {
        date:'2018-05-12',
        id:15,
        key:15,
        sale_300 : 21,
        sale_600 : 1,
        sale_1000 : 1,
        toySales : 262,
        trainsetSales :610,
        ceramicsSales : 0,
        throughTicketSales : 0,
        singleSales : 1450,
        destroySales : 2206,
        grossEarnings : 10272,
        user : '陈三日',
        point : 0,
        other : 0
      },
      {
        date:'2018-05-13',
        id:16,
        key:16,
        sale_300 : 30,
        sale_600 : 0,
        sale_1000 : 3,
        toySales : 228,
        trainsetSales :660,
        ceramicsSales : 174,
        throughTicketSales : 0,
        singleSales : 1884,
        destroySales : 2711,
        grossEarnings : 15692,
        user : '陈三日',
        point : 0,
        other : 0
      },
      {
        date:'2018-05-14',
        id:17,
        key:17,
        sale_300 : 6,
        sale_600 : 0,
        sale_1000 : 2,
        toySales : 168,
        trainsetSales :80,
        ceramicsSales : 58,
        throughTicketSales : 0,
        singleSales : 382,
        destroySales : 699,
        grossEarnings : 5026,
        user : '陈三日',
        point : 0,
        other : 0
      },
      {
        date:'2018-05-15',
        id:18,
        key:18,
        sale_300 : 5,
        sale_600 : 0,
        sale_1000 : 0,
        toySales : 0,
        trainsetSales :160,
        ceramicsSales : 0,
        throughTicketSales : 0,
        singleSales : 280,
        destroySales : 602,
        grossEarnings : 1780,
        user : '陈三日',
        point : 0,
        other : 0
      },
      {
        date:'2018-05-16',
        id:19,
        key:19,
        sale_300 : 3,
        sale_600 : 0,
        sale_1000 : 0,
        toySales : 188,
        trainsetSales :100,
        ceramicsSales : 0,
        throughTicketSales : 0,
        singleSales : 420,
        destroySales : 534,
        grossEarnings : 1508,
        user : '陈三日',
        point : 0,
        other : 0
      },
      {
        date:'2018-05-17',
        id:20,
        key:20,
        sale_300 : 8,
        sale_600 : 1,
        sale_1000 : 1,
        toySales : 70,
        trainsetSales :170,
        ceramicsSales : 0,
        throughTicketSales : 0,
        singleSales : 60,
        destroySales : 724,
        grossEarnings : 4280,
        user : '陈三日',
        point : 0,
        other : 0
      },
      {
        date:'2018-05-18',
        id:21,
        key:21,
        sale_300 : 4,
        sale_600 : 0,
        sale_1000 : 0,
        toySales : 19,
        trainsetSales :70,
        ceramicsSales : 38,
        throughTicketSales : 0,
        singleSales : 198,
        destroySales : 960,
        grossEarnings : 1417,
        user : '陈三日',
        point : 0,
        other : 0
      },
      {
        date:'2018-05-19',
        id:22,
        key:22,
        sale_300 : 16,
        sale_600 : 0,
        sale_1000 : 1,
        toySales : 86,
        trainsetSales :550,
        ceramicsSales : 0,
        throughTicketSales : 168,
        singleSales : 1845,
        destroySales : 2526,
        grossEarnings : 8409,
        user : '陈三日',
        point : 0,
        other : 0
      },
      {
        date:'2018-05-20',
        id:23,
        key:23,
        sale_300 : 23,
        sale_600 : 2,
        sale_1000 : 2,
        toySales : 142,
        trainsetSales :40,
        ceramicsSales : 68,
        throughTicketSales : 0,
        singleSales : 1288,
        destroySales : 3048,
        grossEarnings : 11800,
        user : '陈三日',
        point : 0,
        other : 0
      },
      {
        date:'2018-05-21',
        id:24,
        key:24,
        sale_300 : 2,
        sale_600 : 0,
        sale_1000 : 0,
        toySales : 0,
        trainsetSales :80,
        ceramicsSales : 0,
        throughTicketSales : 0,
        singleSales : 290,
        destroySales : 546,
        grossEarnings : 1860,
        user : '陈三日',
        point : 0,
        other : 0
      },
      {
        date:'2018-05-22',
        id:25,
        key:25,
        sale_300 : 8,
        sale_600 : 0,
        sale_1000 : 0,
        toySales : 0,
        trainsetSales :130,
        ceramicsSales : 38,
        throughTicketSales : 0,
        singleSales : 238,
        destroySales : 1048,
        grossEarnings : 2638,
        user : '陈三日',
        point : 0,
        other : 0
      },
      {
        date:'2018-05-23',
        id:26,
        key:26,
        sale_300 : 4,
        sale_600 : 0,
        sale_1000 : 0,
        toySales : 0,
        trainsetSales :100,
        ceramicsSales : 0,
        throughTicketSales : 0,
        singleSales : 250,
        destroySales : 1002,
        grossEarnings : 1450,
        user : '陈三日',
        point : 0,
        other : 0
      },
      {
        date:'2018-05-24',
        id:27,
        key:27,
        sale_300 : 4,
        sale_600 : 0,
        sale_1000 : 0,
        toySales : 35,
        trainsetSales :60,
        ceramicsSales : 0,
        throughTicketSales : 0,
        singleSales : 85,
        destroySales : 633,
        grossEarnings : 1320,
        user : '陈三日',
        point : 0,
        other : 0
      },
      {
        date:'2018-05-25',
        id:28,
        key:28,
        sale_300 : 7,
        sale_600 : 0,
        sale_1000 : 1,
        toySales : 0,
        trainsetSales :50,
        ceramicsSales : 0,
        throughTicketSales : 0,
        singleSales : 220,
        destroySales : 628,
        grossEarnings : 3070,
        user : '陈三日',
        point : 0,
        other : 0
      },
      {
        date:'2018-05-26',
        id:29,
        key:29,
        sale_300 : 17,
        sale_600 : 1,
        sale_1000 : 0,
        toySales : 138,
        trainsetSales :380,
        ceramicsSales : 0,
        throughTicketSales : 0,
        singleSales : 1770,
        destroySales : 2546,
        grossEarnings : 7908,
        user : '陈三日',
        point : 0,
        other : 0
      },
      {
        date:'2018-05-27',
        id:30,
        key:30,
        sale_300 : 17,
        sale_600 : 0,
        sale_1000 : 1,
        toySales : 206,
        trainsetSales :70,
        ceramicsSales : 0,
        throughTicketSales : 0,
        singleSales : 540,
        destroySales : 2080,
        grossEarnings : 6846,
        user : '陈三日',
        point : 0,
        other : 0
      },
      {
        date:'2018-05-28',
        id:31,
        key:31,
        sale_300 : 5,
        sale_600 : 0,
        sale_1000 : 0,
        toySales : 43,
        trainsetSales :20,
        ceramicsSales : 0,
        throughTicketSales : 0,
        singleSales : 140,
        destroySales : 766,
        grossEarnings : 2103,
        user : '陈三日',
        point : 0,
        other : 0
      },
      {
        date:'2018-05-29',
        id:32,
        key:32,
        sale_300 : 10,
        sale_600 : 0,
        sale_1000 : 0,
        toySales : 0,
        trainsetSales :150,
        ceramicsSales : 0,
        throughTicketSales : 0,
        singleSales : 320,
        destroySales : 1135,
        grossEarnings : 1220,
        user : '陈三日',
        point : 0,
        other : 0
      },
      {
        date:'2018-05-30',
        id:33,
        key:33,
        sale_300 : 3,
        sale_600 : 0,
        sale_1000 : 0,
        toySales : 810,
        trainsetSales :190,
        ceramicsSales : 0,
        throughTicketSales : 0,
        singleSales : 310,
        destroySales : 1497,
        grossEarnings : 2020,
        user : '陈三日',
        point : 0,
        other : 0
      },
      {
        date:'2018-05-31',
        id:34,
        key:34,
        sale_300 : 3,
        sale_600 : 0,
        sale_1000 : 0,
        toySales : 214,
        trainsetSales :70,
        ceramicsSales : 0,
        throughTicketSales : 0,
        singleSales : 140,
        destroySales : 624,
        grossEarnings : 1254,
        user : '陈三日',
        point : 0,
        other : 0
      },
      {
        date:'2018-06-01',
        id:35,
        key:35,
        sale_300 : 35,
        sale_600 : 1,
        sale_1000 : 1,
        toySales : 340,
        trainsetSales :510,
        ceramicsSales : 0,
        throughTicketSales : 0,
        singleSales : 1970,
        destroySales : 3812,
        grossEarnings : 14410,
        user : '陈三日',
        point : 0,
        other : 0
      },
      {
        date:'2018-06-02',
        id:36,
        key:36,
        sale_300 : 16,
        sale_600 : 1,
        sale_1000 : 0,
        toySales : 260,
        trainsetSales :480,
        ceramicsSales : 0,
        throughTicketSales : 0,
        singleSales : 1615,
        destroySales : 3694,
        grossEarnings : 7275,
        user : '陈三日',
        point : 0,
        other : 0
      },
      {
        date:'2018-06-03',
        id:37,
        key:37,
        sale_300 : 16,
        sale_600 : 0,
        sale_1000 : 0,
        toySales : 0,
        trainsetSales :300,
        ceramicsSales : 68,
        throughTicketSales : 0,
        singleSales : 817,
        destroySales : 2432,
        grossEarnings : 5617,
        user : '陈三日',
        point : 0,
        other : 0
      },
      {
        date:'2018-06-04',
        id:38,
        key:38,
        sale_300 : 5,
        sale_600 : 0,
        sale_1000 : 0,
        toySales : 152,
        trainsetSales :50,
        ceramicsSales : 38,
        throughTicketSales : 0,
        singleSales : 208,
        destroySales : 646,
        grossEarnings : 1860,
        user : '陈三日',
        point : 0,
        other : 0
      },
      {
        date:'2018-06-05',
        id:39,
        key:39,
        sale_300 : 2,
        sale_600 : 0,
        sale_1000 : 0,
        toySales : 752,
        trainsetSales :100,
        ceramicsSales : 0,
        throughTicketSales : 0,
        singleSales : 250,
        destroySales : 1542,
        grossEarnings : 930,
        user : '陈三日',
        point : 0,
        other : 0
      },
      {
        date:'2018-06-06',
        id:40,
        key:40,
        sale_300 : 10,
        sale_600 : 0,
        sale_1000 : 0,
        toySales : 686,
        trainsetSales :100,
        ceramicsSales : 0,
        throughTicketSales : 0,
        singleSales : 230,
        destroySales : 980,
        grossEarnings : 4016,
        user : '陈三日',
        point : 0,
        other : 0
      },
    ]
  }
};
export default {
  namespace: 'profit',

  state: {

  },

  effects: {
    *fetch(_, { call, put }) {
      const response = mock;
      yield put({
        type: 'show',
        payload: response,
      });
    },
    *fetchTimeLineData(_, { call, put }) {
      const response = mock;
      yield put({
        type: 'queryTimeLineData',
        payload: response,
      });
    },
  },

  reducers: {
    show(state, { payload }) {
      return {
        ...state,
        ...payload,
      };
    },
    queryTimeLineData(state, { payload }) {
      console.log('payload',payload)
      let data = [...payload.data.list];
      let dataArray = [];
      for(let i = 0; i < data.length; i++){
        dataArray.push({
          x : data[i].date,
          y1 : data[i].destroySales,
          y2 : data[i].grossEarnings,
        })
      }
      console.log('dataArray',dataArray)
      dataArray.sort((a, b) => a.x - b.x);
      console.log('dataArray222',dataArray)
      return {
        ...state,
        timeLineData: dataArray,
      };
    },
  },
};
